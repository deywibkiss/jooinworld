/** * Utilities for seg component *  *  */( function( $, window, document ){		var Misc = function( a ){				// attributes or global vars here			};		Misc.prototype = {						/**			 * Inializes the functions when DOM ready			 */						initialize: function(){							}						/**			 *  Serialize form into json format			 *  			 *  @param { string } name class or id of the html element to embed the loader			 *  @return { object } form into json			 *  			 */		,	formToJson: function( selector ){							var o = {};			    var a = $( selector ).serializeArray();			    			    $.each( a, function() {			        if ( o[ this.name ] !== undefined ) {			            if ( ! o[this.name].push ) {			                o[ this.name ] = [ o[ this.name ] ];			            }			            			            o[ this.name ].push( this.value || '' );			            			        } else {			            o[ this.name ] = this.value || '';			        }			    });			    			    return o;								}			       /**	         * Helps in the process of making a ajax requests	         *	         * @param { object } Options for configuring the ajax request	         * @param { object } data object to be sent	         */		,	ajaxHandler: function( options, data ) {		             var result	             ,   defaults = {	                     type: 'post'	                 ,   url: 'index.php'	                 ,   data: data	                 ,   async: false	                 ,   success: function( data ) {	                             result = data;	                     }		                 ,   error: function ( XMLHttpRequest, textStatus, errorThrown ) {	                             console.log( "error :" + XMLHttpRequest.responseText );	                     }	                 }		             // Merge defaults and options	             options = $.extend( {}, defaults, options );		             // Do the ajax request	             $.ajax( options );		             // Return the response object	             return result;		        }	        /**            * Given an array of required fields, this function            * checks whether the second argument have them            */        ,   validateEmptyFields: function( required, objectData, errors ) {                $.each( required, function( key, value ) {                    if ( objectData[ value ] == null || objectData[ value ] == "" ) {                        errors.push( value );                    }                });                return errors;            }            /**			* Given an array of required fields, this function			* checks whether the second argument have them			*/		,   validateEmptyObjectAttrs: function( _object, errors ) {				$.each( _object, function( key, value ) {					if ( value == null || value == "" ) {						errors.push( key );					}				});				return errors;			}            /**			*			* Validate only numbers			* @param { string } the string to validate			* 			*/		,	justNumbers: function( value ){				var pattern = /^\d+$/				, 	exp = new RegExp( pattern );				if( typeof value == 'undefined' )					return false;				return exp.test( value );			}			/**			*			* Validate only letters			* @param { string } the string to validate			* 			*/		,	justLetters: function( value ){				var pattern = /^[ñA-Za-z _]*[ñA-Za-z][ñA-Za-z _]*$/				, 	exp = new RegExp( pattern );				if( typeof value == 'undefined' )					return false;				return exp.test( value );			}			/**			* Converts latin string to anglo			*			* @param { string } the string to be sanitized			* @param { bool } numbers are allowed or not			* @param { bool } special characters are allowed or not			* @param { bool } blank spaces are allowed or not			* @param { string } blank spaces are allowed or not			* @param { string } blank spaces are replaced to			* @return { string } the string sanitized			*			*/		,	latinToAnglo: function( value, allowNumbers, allowSpecial, allowSpaces, replace ){				if( typeof replace == 'undefined' || replace == null )					replace = '';				value = value.replace(/[ÀÁÂÃÄÅ]/,"A");			    value = value.replace(/[àáâãäå]/,"a");			    value = value.replace(/[ÈÉÊË]/,"E");			    value = value.replace(/[èéêë]/,"e");			    value = value.replace(/[íìîï]/,"i");			    value = value.replace(/[ÍÌÎÏ]/,"I");			    value = value.replace(/[óòôö]/,"o");			    value = value.replace(/[ÒÓÔÖ]/,"O");			    value = value.replace(/[úùûü]/,"u");			    value = value.replace(/[ÚÙÛÜ]/,"U");			    value = value.replace(/[çÇ]/,"c");			    value = value.replace(/[ñ]/,"n");			    value = value.replace(/[Ñ]/,"N");			    if( ! allowNumbers )			    	value = value.replace(/[1234567890]/g, '');			    if( ! allowSpecial )			    	value = value.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g, '' );			    if( ! allowSpaces )			    	value = value.replace( /[  ]/g, replace);						return value;			}        	/**            * Check whether an string is a correct email            * @param { str } String to test            * @return { bool }            */        ,   isEmail: function( string ) {                var emailExpression = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;                return emailExpression.test( string );            }            /**            * Sets a countdown            *            * @param { object } arguments to set: count, limit, selector, callback            * @return { function } the callback passed, return otherwise            *              */        ,	setCountdown: function( args ){				var counter=setInterval( reverse, 1000); //1000 will  run it every 1 second				function reverse(){										args.count = args.count - 1;					if ( args.count <= args.limit	 ) {												clearInterval( counter);						if ( args.callback !== null ) {                            args.callback.call();                        }						return;					}					$( args.selector ).text( args.count );				}        	}        	/**        	* Sets a countdown a display the text in a HTML Object, triggers a function callback when reaches the limit        	*        	* @param { object } args with data {										duration: ( int ) duration in milliseconds					,	interval: ( int ) interval of the count down in milliseconds					,	limit: ( int ) limit until callback executes					,	selector: ( string ) jQuery selector string					,	callback: ( function ) function callback        		}        	*        	* @return { function } Callback function        	*        	*/        ,	humanCountDown: function( args ){        		var counter = setInterval( humanReverse, 1000)				,	_this = this;				function humanReverse(){					args.duration = args.duration - args.interval;					var mom = moment( args.duration ).format( 'mm:ss' );					if ( args.duration < args.limit ) {												clearInterval( counter);						if ( args.callback !== null ) {                            args.callback.call();                        }						return;					}        			$( args.selector ).text( mom );				}				        	}    	,	showNotification: function( type, message, time ){								    		$( '.global-notification' ).removeClass( 'error, success, warning, info' );	    		$( '.global-notification' ).addClass( type );	    		$( '.global-notification' ).text( message );	    		$( '.global-notification' ).fadeIn();	    		this.closeOnClickOut( '.global-notification' );								if( time != 0 ){	    			setTimeout( function(){ $( '.global-notification' ).fadeOut(); }, time )					return;				}    		}    		/**        	* validates if object is empty        	*        	*/        ,	isEmptyObject: function( obj ){        		// Speed up calls to hasOwnProperty				var hasOwnProperty = Object.prototype.hasOwnProperty;			    // null and undefined are "empty"			    if (obj == null) return true;			    // Assume if it has a length property with a non-zero value			    // that that property is correct.			    if (obj.length && obj.length > 0)    return false;			    if (obj.length === 0)  return true;			    // Otherwise, does it have any properties of its own?			    // Note that this doesn't handle			    // toString and toValue enumeration bugs in IE < 9			    for (var key in obj) {			        if (hasOwnProperty.call(obj, key)) return false;			    }			    return true;        	}			/**			* Hides an element when it is clicked outiside			* @param { string } string for the jQuery selector like: ".my-class"			* @return { null }			*/		,   closeOnClickOut: function( selector, callback ) {				$( document ).mouseup( function( e ) {					if ( ! $( selector ).is( ":visible" ) ) {						return;					}					if ( $( selector ).has( e.target ).length === 0 ) {						$( selector ).hide();						if ( callback != null ) {							callback.call();						}					}				});			}			/**			* Sets dots in numbers			*			* @param { numeric } the number to be changed			* @return { string } the number with dots			*			*/		,	numberDots: function( num ){				var number = new String( num );				var result = '';				while( number.length > 3 ){				 result = '.' + number.substr(number.length - 3) + result;				 number = number.substring(0, number.length - 3);				}				result = number + result;				return result;			}			/**			* Clear all window intervals started previously			*			*/		,	clearAllIntervals: function(){				var interval_id = window.setInterval("", 9999);				// Get a reference to the last interval +1				for (var i = 1; i < interval_id; i++)				    window.clearInterval( i );			}				/**		* metodo rtrim como el del lenguaje php			*/		, rtrim: function( str ){						if( typeof str != 'string')				return false;						return str.replace(/\s*$/g, '');		}					/**		* metodo ltrim como el del lenguaje php			*/		, ltrim: function( str ){						if( typeof str != 'string')				return false;						return str.replace(/^\s*/g, '');		}					/**		* metodo trim como el del lenguaje php			*/		, trim: function( str ){						if( typeof str != 'string')				return false;						return str.replace(/^\s*|\s*$/g, '');		}		};			window.Misc = new Misc();	window.Misc.initialize();		})( jQuery, this, this.document, undefined );