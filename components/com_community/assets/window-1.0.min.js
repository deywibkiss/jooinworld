var mouse_is_inside=false;var cwindow_is_modeless=false;var cWindowHelper={contentOuterHeight:0,contentWrapHeight:0,contentHeight:0,intervalHandle:0,save:function(){var a=joms.jQuery("#cWindow");if(a.length>0){this.contentOuterHeight=a.find("#cWindowContentOuter").height();this.contentWrapHeight=a.find("#cWindowContentWrap").height();this.contentHeight=a.find("#cWindowContent").outerHeight()}},setMark:function(){if(this.getMark()==false){joms.jQuery("#cWindow").find("#cWindowContent").append('<div id="oldcontentmark"></div>')}},getMark:function(){var a=joms.jQuery("#cWindow");if(a.length>0){return(a.find("#cWindowContent").find("#oldcontentmark").length>0)?true:false}else{return null}},start:function(){if(this.getMark()==null){return}this.stop();this.intervalHandle=window.setInterval(function(){cWindowAutoResize()},500)},stop:function(){if(this.intervalHandle>0){window.clearInterval(this.intervalHandle)}}};function cWindowShow(windowCall,winTitle,contentWidth,contentHeight,winType){joms.jQuery("body").unbind("mouseup");joms.jQuery("#cWindow").remove();var cWindowHTML=decodeURIComponent("%3Cdiv%20id%3D%22cWindow%22%20class%3D%22%7BcWindoClass%7D%22%3E%0A%09%3Cdiv%20id%3D%22cwin_tl%22%3E%3C%2Fdiv%3E%0A%09%3Cdiv%20id%3D%22cwin_tm%22%3E%3C%2Fdiv%3E%0A%09%3Cdiv%20id%3D%22cwin_tr%22%3E%3C%2Fdiv%3E%0A%09%3Cdiv%20style%3D%22clear%3A%20both%3B%22%3E%3C%2Fdiv%3E%0A%0A%09%3Cdiv%20id%3D%22cwin_ml%22%3E%3C%2Fdiv%3E%0A%09%3Cdiv%20id%3D%22cWindowContentOuter%22%3E%0A%0A%09%09%3Cdiv%20id%3D%22cWindowContentTop%22%3E%0A%09%09%09%3Ca%20href%3D%22javascript%3Avoid(0)%3B%22%20onclick%3D%22cWindowHide()%3B%22%20id%3D%22cwin_close_btn%22%3E%3C%2Fa%3E%0A%09%09%09%3Cdiv%20id%3D%22cwin_logo%22%3E%3C%2Fdiv%3E%0A%09%09%09%3Cdiv%20class%3D%22clr%22%3E%3C%2Fdiv%3E%0A%09%09%3C%2Fdiv%3E%0A%0A%09%09%3Cdiv%20id%3D%22cWindowContentWrap%22%3E%0A%09%09%09%3Cdiv%20id%3D%22cWindowContent%22%3E%3C%2Fdiv%3E%0A%09%09%3C%2Fdiv%3E%0A%0A%09%3C%2Fdiv%3E%0A%09%3Cdiv%20id%3D%22cwin_mr%22%3E%3C%2Fdiv%3E%0A%09%3Cdiv%20style%3D%22clear%3A%20both%3B%22%3E%3C%2Fdiv%3E%0A%0A%09%3Cdiv%20id%3D%22cwin_bl%22%3E%3C%2Fdiv%3E%0A%09%3Cdiv%20id%3D%22cwin_bm%22%3E%3C%2Fdiv%3E%0A%09%3Cdiv%20id%3D%22cwin_br%22%3E%3C%2Fdiv%3E%0A%09%3Cdiv%20style%3D%22clear%3A%20both%3B%22%3E%3C%2Fdiv%3E%0A%3C%2Fdiv%3E");if(cwindow_is_modeless){cWindowHTML=cWindowHTML.replace("{cWindoClass}","dialog modeless")}else{cWindowHTML=cWindowHTML.replace("{cWindoClass}","dialog")}cwindow_is_modeless=false;var cWindow=joms.jQuery(cWindowHTML);var cWindowSize;var cBrowserWidth=joms.jQuery(window).width();if(cBrowserWidth<="480"){cWindowSize={contentWrapHeight:function(){return +contentHeight},contentOuterWidth:function(){return +cBrowserWidth-20},contentOuterHeight:function(){return +contentHeight+40},width:function(){return this.contentOuterWidth()-50},height:function(){return this.contentOuterHeight()+2},left:function(){return(joms.jQuery(window).width()-this.width())/2},top:function(){return joms.jQuery(document).scrollTop()+((joms.jQuery(window).height()-this.height())/2)},zIndex:function(){return cGetZIndexMax()+1}}}else{cWindowSize={contentWrapHeight:function(){return +contentHeight},contentOuterWidth:function(){return +contentWidth},contentOuterHeight:function(){return +contentHeight+40},width:function(){return this.contentOuterWidth()+2},height:function(){return this.contentOuterHeight()+2},left:function(){return(joms.jQuery(window).width()-this.width())/2},top:function(){return joms.jQuery(document).scrollTop()+((joms.jQuery(window).height()-this.height())/2)},zIndex:function(){return cGetZIndexMax()+1}}}cWindow.find("#cwin_logo").html(winTitle);cWindow.find("#cWindowContentWrap").css({height:cWindowSize.contentWrapHeight()});cWindow.find("#cWindowContentOuter, #cwin_tm, #cwin_bm").css({width:cWindowSize.contentOuterWidth()});cWindow.find("#cWindowContentOuter, #cwin_ml, #cwin_mr").css({height:cWindowSize.contentOuterHeight()});cWindow.attr({"class":winType}).css({width:cWindowSize.width(),height:cWindowSize.height(),top:cWindowSize.top(),left:cWindowSize.left(),zIndex:cWindowSize.zIndex()}).prependTo("body");jax.loadingFunction=function(){joms.jQuery("#cWindowContentWrap").addClass("loading")};jax.doneLoadingFunction=function(){joms.jQuery("#cWindowContentWrap").removeClass("loading").css("overflow","auto")};if(windowCall!=undefined&&typeof(windowCall)=="string"){eval(windowCall)}if(typeof(windowCall)=="function"){windowCall()}if(joms.jQuery.browser.msie&&joms.jQuery.browser.version.substr(0,1)<7&&typeof(jomsIE6)!="undefined"&&jomsIE6==true){joms.jQuery("#cwin_tm, #cwin_bm, #cwin_ml, #cwin_mr").each(function(){joms.jQuery(this)[0].filters(0).sizingMethod="crop"})}joms.jQuery("#community-wrap iframe").css("visibility","hidden");cWindowHelper.save();cWindowHelper.start()}function cMiniWindowShow(c,d,a,e,b){cwindow_is_modeless=true;cWindowShow(c,d,a,e,b);joms.jQuery("#cWindow").hover(function(){mouse_is_inside=true},function(){mouse_is_inside=false});joms.jQuery("body").mouseup(function(f){if(joms.jQuery.browser.msie){if(f.target.tagName=="SELECT"||f.target.tagName=="OPTION"){return false}}if(!mouse_is_inside){cMiniWindowHide()}})}function cWindowHide(){var a=joms.jQuery("#cWindow");a.find("#cWindowAction").add("<div>").animate({bottom:"-30px"},"fast",function(){a.fadeOut("fast",function(){a.find("iframe").prop("src","");a.remove();joms.jQuery("#community-wrap iframe").css("visibility","visible");cWindowHelper.stop()})})}function cMiniWindowHide(){var a=joms.jQuery("#cWindow");a.remove();joms.jQuery("#community-wrap iframe").css("visibility","visible")}function cWindowAddContent(html,actions,cmd){var cWindow=joms.jQuery("#cWindow");cWindow.find("#cWindowContent").html(html);if(actions){joms.jQuery('<div id="cWindowAction">').html(actions).css("bottom","-30px").appendTo("#cWindowContentOuter").animate({bottom:"0px"})}if(cmd!=undefined&&cmd!=""){eval(cmd)}}function cWindowResize(d){var j=joms.jQuery(window).height()*0.8;var m=joms.jQuery(window).height()*0.12;if(d>j){d=j}if(d<m){d=m}var f=joms.jQuery("#cWindow");if(f.length<=0){return}var b=f.find("#cWindowAction");var c=(b.length>0)?b.height():0;var i=f.find("#cWindowContentTop");var l=(i.length>0)?i.height():0;var k=cWindowHelper.contentWrapHeight;var g=cWindowHelper.contentOuterHeight;var e=parseInt(d);var a=e+c+l;f.find("#cWindowContentWrap").animate({height:"+="+(e-k)+"px"});f.find("#cWindowContentOuter, #cwin_ml, #cwin_mr").animate({height:"+="+(a-g)+"px"});f.animate({height:"+="+(a-g)+"px",top:"-="+(a-g)/2+"px"},function(){cWindowHelper.save();cWindowHelper.start()})}function cWindowActions(a){joms.jQuery("#cWindowAction").remove();if(a){joms.jQuery('<div id="cWindowAction">').html(a).css("bottom","-30px").appendTo("#cWindowContentOuter").animate({bottom:"0px"})}jax.loadingFunction=function(){joms.jQuery("#cWindowAction").addClass("loading");joms.jQuery("#cWindowContent").find("input, textarea, button").attr("disabled",true)};jax.doneLoadingFunction=function(){joms.jQuery("#cWindowAction").removeClass("loading");joms.jQuery("#cWindowContent").find("input, textarea, button").attr("disabled",false)};cWindowHelper.save();cWindowHelper.start()}function cGetZIndexMax(){var d=document.getElementsByTagName?document.getElementsByTagName("*"):document.all;var c=0;for(var b=0;b<d.length;b++){var f=d[b];var a=null;if(f.currentStyle){a=f.currentStyle}else{if(document.defaultView&&document.defaultView.getComputedStyle){a=document.defaultView.getComputedStyle(f,"")}}var e;if(a){e=Number(a.zIndex)}else{e=Number(f.style.zIndex)}if(!isNaN(e)){c=Math.max(c,e)}}return c}function cWindowAutoResize(){if(cWindowHelper.getMark()==false){var a=joms.jQuery("#cWindow #cWindowContent").outerHeight();cWindowHelper.setMark();if(cWindowHelper.contentHeight!=a){cWindowHelper.stop();cWindowResize(a)}}};