<?php/** * @package     PQRS * @copyright   Copyright (C) 2011 - 2014 Timble CVBA (http://www.sainetingenieria.com) * @license     GNU GPLv3 <http://www.gnu.org/licenses/gpl.html> * @link        http://www.sainetinegnieria.com */defined('_JEXEC') or die;// Need to do this as Joomla 2.5 "protects" parent and manifest properties of the installerglobal $installer_manifest, $installer_source;$installer_manifest = simplexml_load_file($this->parent->getPath('referidos'));$installer_source = $this->parent->getPath('source');class com_referidosInstallerScript{    /**     * Name of the component     */    public $component;    public function __construct($installer)    {        $class = get_class($this);        preg_match('#^com_([a-z0-9_]+)#', get_class($this), $matches);        $this->component = $matches[1];    }    public function preflight($type, $installer)    {        global $installer_manifest, $installer_source;        $return = true;        $errors = array();        if ($return === false && $errors) {            $error_string = implode("<br />", $errors);            $installer->getParent()->abort($error_string);        }        return $return;    }    protected function _backupTable($table)    {        $return = true;        $db     = JFactory::getDBO();        $db->setQuery('SHOW TABLES LIKE '.$db->quote($db->replacePrefix($table)));        if ($db->loadResult()) {            $db->setQuery(sprintf('RENAME TABLE `%1$s` TO `%1$s_bkp`;', $table));            $return = $db->query();        }        return $return;    }            /**         * method to run after an install/update/uninstall method         *         * @return void         */        function postflight($type, $parent)         {                // $parent is the class calling this method                // $type is the type of change (instll, update or discover_install)                echo '<p>' . JText::_('Has Instalado correctamente REFERIDOS by Sainet Ingenieria.') . '</p>';        }}