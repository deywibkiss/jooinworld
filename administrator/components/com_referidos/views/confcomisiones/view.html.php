<?php// No direct access to this filedefined('_JEXEC') or die('Restricted access'); // import Joomla view libraryjimport('joomla.application.component.view'); /** * HTML View class for the HelloWorld Component */class ReferidosViewConfComisiones extends JView{		private $model_confcomision;		protected $item = array();	        // Overwriting JView display method        function display($tpl = null)         {                // Assign data to the view                $this->model_confcomision = new ReferidosModelConfComision();                 // Check for errors.                if (count($errors = $this->get('Errors')))                 {					JError::raiseError(500, implode('<br />', $errors));					return false;                }								//add toolbar				$this->addToolbar();								//item Conf. Comision				$this->renderConfComision();	                // Display the view                parent::display($tpl);	        }				/**		 * Add the page title and toolbar.		 *		 * @since	1.6		 */		protected function addToolbar()		{			$user		= JFactory::getUser();			$canDo		= ReferidosHelper::getActions();				JToolBarHelper::title( 'Gestión Referidos : Configuración Comisión' , 'config.png' );						if ( $canDo->get('core.edit') || $canDo->get('core.create') ) {				JToolBarHelper::apply('confcomision.apply');				JToolBarHelper::save('confcomision.save');			}			JToolBarHelper::divider();			if (empty($id_edit))  {				JToolBarHelper::cancel('confcomision.cancel');			} else {				JToolBarHelper::cancel('confcomision.cancel', 'JTOOLBAR_CLOSE');			}		}				/**		* obtengo todos los planes activos creados;		*/		protected function renderConfComision(){					$id = JRequest::getInt( 'id' , '');						if( empty( $id ) ){								$wheres = array(						'key' => ' 1 '					,	'condition' => ' LIMIT '					,	'value' => '0 , 1'					,	'glue' => ''				);								$reg_conf = $this->model_confcomision->getObjects( $wheres );								if( count($reg_conf) )					$id = $reg_conf[ 0 ]->id;			}						$this->model_confcomision->instance( $id );						$this->item = $this->model_confcomision;			return;		}}