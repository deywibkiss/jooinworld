<?php// No direct access to this filedefined('_JEXEC') or die('Restricted access'); // import Joomla view libraryjimport('joomla.application.component.view'); /** * HTML View class for the HelloWorld Component */class ReferidosViewCaracteristicas extends JView{	public $item;	public $items;	protected $itemsall;	protected $model_caracteristica;	/**	 * Display the view	 */	public function display($tpl = null)	{		$this->model_caracteristica = new ReferidosModelCaracteristica();		// Check for errors.		if (count($errors = $this->get('Errors'))) {			JError::raiseError(500, implode("\n", $errors));			return false;		}				//add toolbar		$this->addToolbar();				//obtengo un item		$this->getItem();				//obtengo las caracteristicas		$this->getCaracteristicas();				parent::display($tpl);	}	/**	 * Add the page title and toolbar.	 *	 * @since	1.6	 */	protected function addToolbar()	{		$canDo  = ReferidosHelper::getActions();					JToolBarHelper::title( 'GestiÃ³n Referidos : Caracteristicas' , 'caracteristicas');				if ($canDo->get('core.create')) {			JToolBarHelper::addNew('caracteristica.create');		}		/*if ($canDo->get('core.edit')) {			JToolBarHelper::editList( 'caracteristica.edit' );		}*/		if($canDo->get('core.delete')) {			JToolBarHelper::deleteList( 'Desea eliminar estas Caracteristicas?' ,'caracteristica.delete');		}		JToolBarHelper::divider();		if ($canDo->get('core.edit.state')) {			JToolBarHelper::publish('caracteristica.publish' );			JToolBarHelper::unpublish('caracteristica.unpublish' );		}	}		/**	 * obtengo una caracteristica	 *	 * @since	1.6	 */	 public function getItem(){		 		 $id = JRequest::getInt('id');		 		 $this->model_caracteristica->instance( $id );		 $this->item = $this->model_caracteristica;	 }	 	 /**	 * obtengo una caracteristica	 *	 * @since	1.6	 */	 public function getCaracteristicas(){		 		 $limit = JRequest::getVar( 'limit' , 10 );		 $limitstart = JRequest::getVar( 'limitstart' , '');		 		 //obtengo todos los resgistros sin aplicar el filtro del paginado		$this->itemsall =  $this->model_caracteristica->getObjects();				$prlimits = array();		if( is_numeric( $limit ) ){			$prlimits = array(					'limitstart' => $limitstart				,	'limit' => $limit			);		}		 		 $this->items = $this->model_caracteristica->getObjects( array() , $prlimits);		 		 foreach( $this->items as $key=>$caracteristica ){						//obtengo una instancia al modelo caracteristicas			$model_usercreate = new ReferidosModelCaracteristica();						$model_usercreate->instance( $caracteristica->id_caracteristica );						$this->items[ $key ]->usercreate = $model_usercreate->getUserCreate();		}	 }}